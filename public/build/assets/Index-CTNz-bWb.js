import{d as M,j as U,c as A,p as g,x as D,a as v,e as t,u as e,h as E,w as s,b as l,k as x,i as k,o as _,f as i,t as m,F as $,r as F,y as I,s as P}from"./app-BvkMj4-F.js";import{_ as j,a as G}from"./index-BPQtWMom.js";import{_ as L}from"./AlertTitle.vue_vue_type_script_setup_true_lang-BBBfK5Rz.js";import{_ as q}from"./index-D2l3Pcwn.js";import{_ as u}from"./index-MlcjGLtN.js";import{_ as H,a as J,b as K,c as O}from"./CardTitle.vue_vue_type_script_setup_true_lang-C7Wvf5BJ.js";import{_ as Q,a as R,b as W,c as X}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DhnmqUd0.js";import{_ as Y}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DlqIMERc.js";import{_ as p}from"./Input.vue_vue_type_script_setup_true_lang-BPSpG4I4.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-qmueQV-t.js";import{_ as Z}from"./AppLayout.vue_vue_type_script_setup_true_lang-CS0_RWNX.js";import{C as ee}from"./file-text-O4Ei2LhW.js";import{P as ae,T as te}from"./trash-CdAqgf9a.js";import{S as se}from"./square-pen-B_HVV9P4.js";import{c as le}from"./createLucideIcon-C9ErEy5p.js";import"./index-BQajbDa3.js";import"./useForwardPropsEmits-Bnkafg18.js";import"./x-BWe9cEwd.js";import"./useForwardExpose-BKrzG8D3.js";import"./VisuallyHidden-z-LB16s1.js";import"./triangle-alert-CapbUlF2.js";import"./circle-x-CSLpUmHv.js";import"./index-BHw9BgFF.js";import"./index-CMWG4mbA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-plus-WTRAzdIT.js";const oe=le("PowerIcon",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),ne={class:"flex flex-col gap-6 p-4"},ie={class:"overflow-x-auto rounded-lg border"},de={class:"w-full text-sm"},re={class:"divide-y"},me={class:"px-4 py-3 font-medium"},ue={class:"px-4 py-3"},fe={class:"px-4 py-3"},_e={class:"px-4 py-3"},pe={class:"px-4 py-3"},ce={class:"flex gap-2"},ve={class:"space-y-2"},ye={class:"grid grid-cols-2 gap-4"},be={class:"space-y-2"},ge={class:"space-y-2"},xe={class:"grid grid-cols-2 gap-4"},ke={class:"space-y-2"},$e={class:"space-y-2"},Re=M({__name:"Index",props:{periods:{}},setup(V){const h=V,w=U(),y=A(()=>w.props.flash),r=g(!1),f=g(null),n=D({name:"",academic_year:"",wave_number:1,start_date:"",end_date:""}),C=()=>{f.value=null,n.reset(),r.value=!0},S=d=>{f.value=d,n.name=d.name,n.academic_year=d.academic_year,n.wave_number=d.wave_number,n.start_date=d.start_date,n.end_date=d.end_date,r.value=!0},z=()=>{f.value?n.put(`/admin/periods/${f.value.id}`,{onSuccess:()=>r.value=!1}):n.post("/admin/periods",{onSuccess:()=>r.value=!1})},B=d=>{confirm("Hapus periode ini?")&&P.delete(`/admin/periods/${d}`)},N=d=>{P.post(`/admin/periods/${d}/activate`)},T=[{title:"Admin Dashboard",href:"/admin/dashboard"},{title:"Periods",href:"/admin/periods"}];return(d,a)=>(_(),v($,null,[t(e(E),{title:"Periode Pendaftaran"}),t(Z,{breadcrumbs:T},{default:s(()=>[l("div",ne,[y.value?.success?(_(),x(e(j),{key:0,class:"border-green-500 bg-green-50"},{default:s(()=>[t(e(ee),{class:"size-4 text-green-600"}),t(e(L),{class:"text-green-800"},{default:s(()=>[...a[7]||(a[7]=[i("Berhasil",-1)])]),_:1}),t(e(G),{class:"text-green-700"},{default:s(()=>[i(m(y.value.success),1)]),_:1})]),_:1})):k("",!0),t(e(H),null,{default:s(()=>[t(e(J),{class:"flex flex-row items-center justify-between"},{default:s(()=>[t(e(K),null,{default:s(()=>[...a[8]||(a[8]=[i("Periode Pendaftaran",-1)])]),_:1}),t(e(u),{onClick:C},{default:s(()=>[t(e(ae),{class:"mr-2 size-4"}),a[9]||(a[9]=i(" Tambah Periode ",-1))]),_:1})]),_:1}),t(e(O),null,{default:s(()=>[l("div",ie,[l("table",de,[a[10]||(a[10]=l("thead",{class:"bg-gray-50"},[l("tr",null,[l("th",{class:"px-4 py-3 text-left"},"Nama"),l("th",{class:"px-4 py-3 text-left"},"Tahun Akademik"),l("th",{class:"px-4 py-3 text-left"},"Periode"),l("th",{class:"px-4 py-3 text-left"},"Status"),l("th",{class:"px-4 py-3 text-left"},"Aksi")])],-1)),l("tbody",re,[(_(!0),v($,null,F(h.periods,o=>(_(),v("tr",{key:o.id,class:"hover:bg-gray-50"},[l("td",me,m(o.name),1),l("td",ue,m(o.academic_year),1),l("td",fe,m(o.start_date)+" - "+m(o.end_date),1),l("td",_e,[t(e(q),{variant:o.is_active?"default":"secondary"},{default:s(()=>[i(m(o.is_active?"Aktif":"Nonaktif"),1)]),_:2},1032,["variant"])]),l("td",pe,[l("div",ce,[t(e(u),{size:"sm",variant:"ghost",onClick:b=>S(o)},{default:s(()=>[t(e(se),{class:"size-4"})]),_:1},8,["onClick"]),o.is_active?k("",!0):(_(),x(e(u),{key:0,size:"sm",variant:"ghost",onClick:b=>N(o.id)},{default:s(()=>[t(e(oe),{class:"size-4 text-green-600"})]),_:1},8,["onClick"])),t(e(u),{size:"sm",variant:"ghost",onClick:b=>B(o.id)},{default:s(()=>[t(e(te),{class:"size-4 text-red-500"})]),_:1},8,["onClick"])])])]))),128))])])])]),_:1})]),_:1})]),t(e(Q),{open:r.value,"onUpdate:open":a[6]||(a[6]=o=>r.value=o)},{default:s(()=>[t(e(R),null,{default:s(()=>[t(e(W),null,{default:s(()=>[t(e(X),null,{default:s(()=>[i(m(f.value?"Edit Periode":"Tambah Periode"),1)]),_:1})]),_:1}),l("form",{onSubmit:I(z,["prevent"]),class:"space-y-4"},[l("div",ve,[t(e(c),null,{default:s(()=>[...a[11]||(a[11]=[i("Nama Periode",-1)])]),_:1}),t(e(p),{modelValue:e(n).name,"onUpdate:modelValue":a[0]||(a[0]=o=>e(n).name=o),placeholder:"PMB 2025 Gelombang 1"},null,8,["modelValue"])]),l("div",ye,[l("div",be,[t(e(c),null,{default:s(()=>[...a[12]||(a[12]=[i("Tahun Akademik",-1)])]),_:1}),t(e(p),{modelValue:e(n).academic_year,"onUpdate:modelValue":a[1]||(a[1]=o=>e(n).academic_year=o),placeholder:"2025/2026"},null,8,["modelValue"])]),l("div",ge,[t(e(c),null,{default:s(()=>[...a[13]||(a[13]=[i("Gelombang",-1)])]),_:1}),t(e(p),{modelValue:e(n).wave_number,"onUpdate:modelValue":a[2]||(a[2]=o=>e(n).wave_number=o),modelModifiers:{number:!0},type:"number",min:"1"},null,8,["modelValue"])])]),l("div",xe,[l("div",ke,[t(e(c),null,{default:s(()=>[...a[14]||(a[14]=[i("Mulai",-1)])]),_:1}),t(e(p),{modelValue:e(n).start_date,"onUpdate:modelValue":a[3]||(a[3]=o=>e(n).start_date=o),type:"date"},null,8,["modelValue"])]),l("div",$e,[t(e(c),null,{default:s(()=>[...a[15]||(a[15]=[i("Selesai",-1)])]),_:1}),t(e(p),{modelValue:e(n).end_date,"onUpdate:modelValue":a[4]||(a[4]=o=>e(n).end_date=o),type:"date"},null,8,["modelValue"])])]),t(e(Y),null,{default:s(()=>[t(e(u),{type:"button",variant:"outline",onClick:a[5]||(a[5]=o=>r.value=!1)},{default:s(()=>[...a[16]||(a[16]=[i("Batal",-1)])]),_:1}),t(e(u),{type:"submit",disabled:e(n).processing},{default:s(()=>[...a[17]||(a[17]=[i("Simpan",-1)])]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{Re as default};
