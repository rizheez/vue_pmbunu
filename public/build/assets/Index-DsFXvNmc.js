import{d as K,j as X,c as Y,p as $,C as G,s as k,x as J,a as f,e as s,u as e,h as O,w as t,b as o,k as C,i as S,o as r,f as n,t as u,F as w,r as T,y as Q}from"./app-BVGEWM6K.js";import{_ as U,a as z}from"./index-Hb5halKI.js";import{_ as j}from"./AlertTitle.vue_vue_type_script_setup_true_lang-DEIRKjo1.js";import{_ as B}from"./index-C1sAbBiS.js";import{_ as v}from"./index-CuVZe7j4.js";import{_ as W,a as Z,b as ee,c as ae}from"./CardTitle.vue_vue_type_script_setup_true_lang-Bb0dQkAi.js";import{_ as se,a as te,b as le,c as oe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BSr2jyqi.js";import{_ as ne}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BIGcW6rl.js";import{_ as c}from"./Input.vue_vue_type_script_setup_true_lang-DFHgkly1.js";import{_ as x}from"./Label.vue_vue_type_script_setup_true_lang-BvsyPPpw.js";import{_ as h,a as E,b as M,c as N,d as p}from"./SelectValue.vue_vue_type_script_setup_true_lang-AHP0eiAd.js";import{_ as de}from"./AppLayout.vue_vue_type_script_setup_true_lang-_9AFCHFl.js";import{C as ie}from"./file-text-O6G_wzb4.js";import{C as re}from"./circle-x-DmwNEScS.js";import{S as ue}from"./search-BJhDGSpg.js";import{P as me}from"./plus-BOy9EUwH.js";import{S as fe}from"./square-pen-BDuBa5Pq.js";import{T as pe}from"./trash-Cd7TpDKz.js";import"./index-vOq7kyG5.js";import"./useForwardPropsEmits-BY2ZqorI.js";import"./ChatWidget.vue_vue_type_script_setup_true_lang-8vk_Rcrv.js";import"./createLucideIcon-C5lEgyj2.js";import"./index-CMWG4mbA.js";import"./loader-circle-7M2jXDkv.js";import"./useForwardExpose-lJv4PZJE.js";import"./VisuallyHidden-CgUpF-d-.js";import"./chevron-down-CF4ygwe1.js";import"./check-Ud3FOmGM.js";import"./useFormControl-DqSJMijB.js";import"./triangle-alert-CxWneAaW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-plus-BfKVh4__.js";const _e={class:"flex flex-col gap-6 p-4"},ve={class:"flex flex-wrap gap-2"},ce={class:"relative"},xe={class:"overflow-x-auto rounded-lg border"},ge={class:"w-full text-sm"},ye={class:"divide-y"},be={class:"px-4 py-3 font-medium"},Ve={class:"px-4 py-3"},$e={class:"px-4 py-3"},we={class:"px-4 py-3"},ke={class:"px-4 py-3"},Ce={class:"px-4 py-3"},Se={key:0,class:"flex gap-2"},Pe={key:1,class:"text-gray-400 text-xs"},Te={class:"mt-4 flex justify-center gap-1"},Ue=["innerHTML"],ze={class:"space-y-2"},je={class:"space-y-2"},Be={class:"space-y-2"},he={class:"space-y-2"},Ee={class:"space-y-2"},Me={class:"space-y-2"},_a=K({__name:"Index",props:{users:{},filters:{}},setup(R){const y=R,A=X(),b=Y(()=>A.props.flash),g=$(y.filters.role||"all"),V=$(y.filters.search||"");G([g,V],()=>{k.get("/admin/users",{role:g.value!=="all"?g.value:void 0,search:V.value||void 0},{preserveState:!0,replace:!0})});const m=$(!1),_=$(null),d=J({name:"",email:"",phone:"",role:"student",password:"",password_confirmation:""}),D=()=>{_.value=null,d.reset(),d.role="student",m.value=!0},F=i=>{_.value=i,d.name=i.name,d.email=i.email,d.phone=i.phone||"",d.role=i.role,d.password="",d.password_confirmation="",m.value=!0},H=()=>{_.value?d.put(`/admin/users/${_.value.id}`,{onSuccess:()=>m.value=!1}):d.post("/admin/users",{onSuccess:()=>m.value=!1})},L=i=>{confirm("Hapus pengguna ini?")&&k.delete(`/admin/users/${i}`)},q=i=>{switch(i){case"admin":return"destructive";case"staff":return"default";default:return"secondary"}},I=[{title:"Admin Dashboard",href:"/admin/dashboard"},{title:"Manajemen Pengguna",href:"/admin/users"}];return(i,a)=>(r(),f(w,null,[s(e(O),{title:"Manajemen Pengguna"}),s(de,{breadcrumbs:I},{default:t(()=>[o("div",_e,[b.value?.success?(r(),C(e(U),{key:0,class:"border-green-500 bg-green-50"},{default:t(()=>[s(e(ie),{class:"size-4 text-green-600"}),s(e(j),{class:"text-green-800"},{default:t(()=>[...a[10]||(a[10]=[n("Berhasil",-1)])]),_:1}),s(e(z),{class:"text-green-700"},{default:t(()=>[n(u(b.value.success),1)]),_:1})]),_:1})):S("",!0),b.value?.error?(r(),C(e(U),{key:1,class:"border-red-500 bg-red-50"},{default:t(()=>[s(e(re),{class:"size-4 text-red-600"}),s(e(j),{class:"text-red-800"},{default:t(()=>[...a[11]||(a[11]=[n("Error",-1)])]),_:1}),s(e(z),{class:"text-red-700"},{default:t(()=>[n(u(b.value.error),1)]),_:1})]),_:1})):S("",!0),s(e(W),null,{default:t(()=>[s(e(Z),{class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},{default:t(()=>[s(e(ee),null,{default:t(()=>[...a[12]||(a[12]=[n("Manajemen Pengguna",-1)])]),_:1}),o("div",ve,[o("div",ce,[s(e(ue),{class:"absolute left-2 top-2.5 size-4 text-gray-400"}),s(e(c),{modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=l=>V.value=l),placeholder:"Cari...",class:"w-48 pl-8"},null,8,["modelValue"])]),s(e(h),{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=l=>g.value=l)},{default:t(()=>[s(e(E),{class:"w-32"},{default:t(()=>[s(e(M),{placeholder:"Role"})]),_:1}),s(e(N),null,{default:t(()=>[s(e(p),{value:"all"},{default:t(()=>[...a[13]||(a[13]=[n("Semua",-1)])]),_:1}),s(e(p),{value:"admin"},{default:t(()=>[...a[14]||(a[14]=[n("Admin",-1)])]),_:1}),s(e(p),{value:"staff"},{default:t(()=>[...a[15]||(a[15]=[n("Staff",-1)])]),_:1}),s(e(p),{value:"student"},{default:t(()=>[...a[16]||(a[16]=[n("Student",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(e(v),{onClick:D},{default:t(()=>[s(e(me),{class:"mr-2 size-4"}),a[17]||(a[17]=n(" Tambah ",-1))]),_:1})])]),_:1}),s(e(ae),null,{default:t(()=>[o("div",xe,[o("table",ge,[a[18]||(a[18]=o("thead",{class:"bg-gray-50"},[o("tr",null,[o("th",{class:"px-4 py-3 text-left"},"Nama"),o("th",{class:"px-4 py-3 text-left"},"Email"),o("th",{class:"px-4 py-3 text-left"},"Telepon"),o("th",{class:"px-4 py-3 text-left"},"Role"),o("th",{class:"px-4 py-3 text-left"},"Verified"),o("th",{class:"px-4 py-3 text-left"},"Aksi")])],-1)),o("tbody",ye,[(r(!0),f(w,null,T(y.users.data,l=>(r(),f("tr",{key:l.id,class:"hover:bg-gray-50"},[o("td",be,u(l.name),1),o("td",Ve,u(l.email),1),o("td",$e,u(l.phone||"-"),1),o("td",we,[s(e(B),{variant:q(l.role)},{default:t(()=>[n(u(l.role),1)]),_:2},1032,["variant"])]),o("td",ke,[s(e(B),{variant:l.email_verified_at?"default":"secondary"},{default:t(()=>[n(u(l.email_verified_at?"Ya":"Tidak"),1)]),_:2},1032,["variant"])]),o("td",Ce,[l.role!=="student"?(r(),f("div",Se,[s(e(v),{size:"sm",variant:"ghost",onClick:P=>F(l)},{default:t(()=>[s(e(fe),{class:"size-4"})]),_:1},8,["onClick"]),s(e(v),{size:"sm",variant:"ghost",onClick:P=>L(l.id)},{default:t(()=>[s(e(pe),{class:"size-4 text-red-500"})]),_:1},8,["onClick"])])):(r(),f("span",Pe,"-"))])]))),128))])])]),o("div",Te,[(r(!0),f(w,null,T(y.users.links,l=>(r(),f(w,{key:l.label},[l.url?(r(),C(e(v),{key:0,size:"sm",variant:l.active?"default":"outline",onClick:P=>e(k).get(l.url)},{default:t(()=>[o("span",{innerHTML:l.label},null,8,Ue)]),_:2},1032,["variant","onClick"])):S("",!0)],64))),128))])]),_:1})]),_:1})]),s(e(se),{open:m.value,"onUpdate:open":a[9]||(a[9]=l=>m.value=l)},{default:t(()=>[s(e(te),{class:"max-w-md"},{default:t(()=>[s(e(le),null,{default:t(()=>[s(e(oe),null,{default:t(()=>[n(u(_.value?"Edit":"Tambah")+" Pengguna",1)]),_:1})]),_:1}),o("form",{onSubmit:Q(H,["prevent"]),class:"space-y-4"},[o("div",ze,[s(e(x),null,{default:t(()=>[...a[19]||(a[19]=[n("Nama",-1)])]),_:1}),s(e(c),{modelValue:e(d).name,"onUpdate:modelValue":a[2]||(a[2]=l=>e(d).name=l)},null,8,["modelValue"])]),o("div",je,[s(e(x),null,{default:t(()=>[...a[20]||(a[20]=[n("Email",-1)])]),_:1}),s(e(c),{modelValue:e(d).email,"onUpdate:modelValue":a[3]||(a[3]=l=>e(d).email=l),type:"email"},null,8,["modelValue"])]),o("div",Be,[s(e(x),null,{default:t(()=>[...a[21]||(a[21]=[n("Telepon",-1)])]),_:1}),s(e(c),{modelValue:e(d).phone,"onUpdate:modelValue":a[4]||(a[4]=l=>e(d).phone=l)},null,8,["modelValue"])]),o("div",he,[s(e(x),null,{default:t(()=>[...a[22]||(a[22]=[n("Role",-1)])]),_:1}),s(e(h),{modelValue:e(d).role,"onUpdate:modelValue":a[5]||(a[5]=l=>e(d).role=l)},{default:t(()=>[s(e(E),null,{default:t(()=>[s(e(M))]),_:1}),s(e(N),null,{default:t(()=>[s(e(p),{value:"admin"},{default:t(()=>[...a[23]||(a[23]=[n("Admin",-1)])]),_:1}),s(e(p),{value:"staff"},{default:t(()=>[...a[24]||(a[24]=[n("Staff",-1)])]),_:1}),s(e(p),{value:"student"},{default:t(()=>[...a[25]||(a[25]=[n("Student",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",Ee,[s(e(x),null,{default:t(()=>[n("Password "+u(_.value?"(kosongkan jika tidak diubah)":""),1)]),_:1}),s(e(c),{modelValue:e(d).password,"onUpdate:modelValue":a[6]||(a[6]=l=>e(d).password=l),type:"password"},null,8,["modelValue"])]),o("div",Me,[s(e(x),null,{default:t(()=>[...a[26]||(a[26]=[n("Konfirmasi Password",-1)])]),_:1}),s(e(c),{modelValue:e(d).password_confirmation,"onUpdate:modelValue":a[7]||(a[7]=l=>e(d).password_confirmation=l),type:"password"},null,8,["modelValue"])]),s(e(ne),null,{default:t(()=>[s(e(v),{type:"button",variant:"outline",onClick:a[8]||(a[8]=l=>m.value=!1)},{default:t(()=>[...a[27]||(a[27]=[n("Batal",-1)])]),_:1}),s(e(v),{type:"submit",disabled:e(d).processing},{default:t(()=>[...a[28]||(a[28]=[n("Simpan",-1)])]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{_a as default};
