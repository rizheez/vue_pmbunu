import{d as P,p as h,A as V,c as z,a as d,e as r,u as s,h as U,w as i,b as e,f as c,t as o,i as _,q as b,G as j,D as w,o as n,F as v,r as k,k as S,l as $,n as N,s as E}from"./app-B0h9vrpP.js";import{a as B,_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bj4ayEwV.js";import{_ as x}from"./index-D6r1RkZ_.js";import{_ as L,a as H,b as A,c as F}from"./CardTitle.vue_vue_type_script_setup_true_lang-BmKwuO0D.js";import{_ as K}from"./CardDescription.vue_vue_type_script_setup_true_lang-HVCToRBP.js";import{_ as q}from"./Input.vue_vue_type_script_setup_true_lang-nrNRcrMA.js";import{f as G}from"./useFormat-CGBiKtzC.js";import{c as R}from"./createLucideIcon-Bg8iYENi.js";import{S as J}from"./search-BchXVYOA.js";import{E as O}from"./eye-C1mCtmzB.js";import{P as Q}from"./printer-BYUWK4zA.js";import"./VisuallyHidden-BOENPQ0n.js";import"./index-B8Tmgq9C.js";import"./triangle-alert-DyNUt9_v.js";import"./circle-x-8p-q06kl.js";import"./file-text-grNgiSCR.js";import"./ChatWidget.vue_vue_type_script_setup_true_lang-CeB2Blbk.js";import"./index-CMWG4mbA.js";import"./loader-circle-C_RD1hNO.js";import"./useForwardExpose-nr6JhVc6.js";import"./useForwardPropsEmits-B5Vqgun0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-plus-pImha-m-.js";const W=R("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),X={class:"flex flex-col gap-6 p-4"},Y={class:"flex items-center justify-between"},Z=["href"],ee={class:"mb-6 flex flex-wrap gap-4"},ae={class:"flex items-center gap-2"},te=["value"],se={class:"overflow-x-auto rounded-lg border"},re={class:"w-full text-sm"},ie={class:"divide-y"},le={class:"px-4 py-3 font-mono text-xs"},oe={class:"px-4 py-3 font-medium"},ne={class:"px-4 py-3 text-gray-500"},de={class:"px-4 py-3"},pe={class:"flex flex-col"},ue={class:"font-medium"},me={key:0,class:"text-xs text-gray-500"},fe={class:"px-4 py-3"},ce={class:"px-4 py-3 text-gray-500"},_e={class:"px-4 py-3"},ve={class:"px-4 py-3"},xe={class:"flex gap-1"},ge=["href"],he={key:0},ye={key:0,class:"mt-4 flex items-center justify-between"},be={class:"text-sm text-gray-500"},we={class:"flex gap-1"},ke=["innerHTML"],Je=P({__name:"Index",props:{students:{},periods:{},filters:{}},setup(M){const l=M,f=h(l.filters.search||""),p=h(l.filters.status||"all"),u=h(l.filters.period||"all"),g=h(l.students.per_page||10),y=()=>{E.get("/admin/students",{search:f.value||void 0,status:p.value!=="all"?p.value:void 0,period:u.value!=="all"?u.value:void 0,per_page:g.value},{preserveState:!0})};V([p,u,g],()=>y());const D=m=>({draft:{variant:"secondary",label:"Draft"},submitted:{variant:"outline",label:"Terdaftar (Menunggu hasil verifikasi)"},verified:{variant:"default",label:"Terverifikasi"},accepted:{variant:"default",label:"Diterima"},rejected:{variant:"destructive",label:"Ditolak"},re_registration_pending:{variant:"outline",label:"Daftar Ulang Pending"},re_registration_verified:{variant:"default",label:"Daftar Ulang Terverifikasi"},enrolled:{variant:"default",label:"Diterima dan NIM terbit"}})[m||""]||{variant:"secondary",label:"Unknown"},T=[{title:"Admin Dashboard",href:"/admin/dashboard"},{title:"Calon Mahasiswa",href:"/admin/students"}],C=z(()=>{const m=new URLSearchParams;return f.value&&m.append("search",f.value),p.value!=="all"&&m.append("status",p.value),u.value!=="all"&&m.append("period",u.value),`/admin/students-export?${m.toString()}`});return(m,t)=>(n(),d(v,null,[r(s(U),{title:"Manajemen Calon Mahasiswa"}),r(I,{breadcrumbs:T},{default:i(()=>[e("div",X,[r(s(L),null,{default:i(()=>[r(s(H),null,{default:i(()=>[e("div",Y,[e("div",null,[r(s(A),null,{default:i(()=>[...t[4]||(t[4]=[c("Manajemen Calon Mahasiswa",-1)])]),_:1}),r(s(K),null,{default:i(()=>[c(" Total: "+o(l.students.total)+" calon mahasiswa ",1)]),_:1})]),r(s(x),{"as-child":"",class:"gap-2 bg-emerald-600 text-white hover:bg-emerald-700"},{default:i(()=>[e("a",{href:C.value,download:""},[r(s(W),{class:"size-4"}),t[5]||(t[5]=c(" Export Excel ",-1))],8,Z)]),_:1})])]),_:1}),r(s(F),null,{default:i(()=>[e("div",ee,[e("div",ae,[r(s(q),{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=a=>f.value=a),placeholder:"Cari nama, email, no. pendaftaran...",class:"w-64",onKeyup:j(y,["enter"])},null,8,["modelValue"]),r(s(x),{size:"icon",variant:"outline",onClick:y},{default:i(()=>[r(s(J),{class:"size-4"})]),_:1})]),b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>p.value=a),class:"rounded-md border border-input bg-transparent px-3 py-2 text-sm"},[...t[6]||(t[6]=[e("option",{value:"all"},"Semua Status",-1),e("option",{value:"draft"},"Draft",-1),e("option",{value:"submitted"},"Terdaftar",-1),e("option",{value:"verified"},"Terverifikasi",-1),e("option",{value:"accepted"},"Diterima",-1),e("option",{value:"rejected"},"Ditolak",-1)])],512),[[w,p.value]]),b(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>u.value=a),class:"rounded-md border border-input bg-transparent px-3 py-2 text-sm"},[t[7]||(t[7]=e("option",{value:"all"},"Semua Periode",-1)),(n(!0),d(v,null,k(l.periods,a=>(n(),d("option",{key:a.id,value:a.id},o(a.name),9,te))),128))],512),[[w,u.value]]),b(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>g.value=a),class:"rounded-md border border-input bg-transparent px-3 py-2 text-sm"},[...t[8]||(t[8]=[e("option",{value:10},"10 per halaman",-1),e("option",{value:25},"25 per halaman",-1),e("option",{value:50},"50 per halaman",-1),e("option",{value:100},"100 per halaman",-1)])],512),[[w,g.value]])]),e("div",se,[e("table",re,[t[11]||(t[11]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"min-w-[140px] px-4 py-3 text-left font-medium"}," No. Pendaftaran "),e("th",{class:"min-w-[200px] px-4 py-3 text-left font-medium"}," Nama "),e("th",{class:"min-w-[200px] px-4 py-3 text-left font-medium"}," Email "),e("th",{class:"min-w-[200px] px-4 py-3 text-left font-medium"}," Sumber Informasi "),e("th",{class:"min-w-[180px] px-4 py-3 text-left font-medium"}," Prodi Pilihan 1 "),e("th",{class:"whitespace-nowrap px-4 py-3 text-left font-medium"}," Tanggal Daftar "),e("th",{class:"px-4 py-3 text-left font-medium"}," Status "),e("th",{class:"px-4 py-3 text-left font-medium"}," Aksi ")])],-1)),e("tbody",ie,[(n(!0),d(v,null,k(l.students.data,a=>(n(),d("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",le,o(a.registration?.registration_number||"-"),1),e("td",oe,o(a.student_biodata?.name||a.name),1),e("td",ne,o(a.email),1),e("td",de,[e("div",pe,[e("span",ue,o(a.registration?.referral_source||"-"),1),a.registration?.referral_detail?(n(),d("span",me,o(a.registration.referral_detail),1)):_("",!0)])]),e("td",fe,o(a.registration?.program_studi_choice1?.name||"-"),1),e("td",ce,o(a.registration?.created_at?s(G)(a.registration.created_at):"-"),1),e("td",_e,[r(s(B),{variant:D(a.registration?.status).variant},{default:i(()=>[c(o(D(a.registration?.status).label),1)]),_:2},1032,["variant"])]),e("td",ve,[e("div",xe,[r(s(x),{"as-child":"",variant:"ghost",size:"sm"},{default:i(()=>[r(s($),{href:`/admin/students/${a.id}`},{default:i(()=>[r(s(O),{class:"mr-1 size-4"}),t[9]||(t[9]=c(" Detail ",-1))]),_:1},8,["href"])]),_:2},1024),a.registration?(n(),S(s(x),{key:0,"as-child":"",variant:"ghost",size:"icon",title:"Cetak Kartu Peserta"},{default:i(()=>[e("a",{href:`/admin/students/${a.id}/registration-card`,target:"_blank"},[r(s(Q),{class:"size-4"})],8,ge)]),_:2},1024)):_("",!0)])])]))),128)),l.students.data.length===0?(n(),d("tr",he,[...t[10]||(t[10]=[e("td",{colspan:"8",class:"px-4 py-8 text-center text-gray-500"}," Tidak ada data mahasiswa ",-1)])])):_("",!0)])])]),l.students.last_page>1?(n(),d("div",ye,[e("p",be," Halaman "+o(l.students.current_page)+" dari "+o(l.students.last_page),1),e("div",we,[(n(!0),d(v,null,k(l.students.links,a=>(n(),d(v,{key:a.label},[a.url?(n(),S(s(x),{key:0,"as-child":"",variant:"outline",size:"sm",class:N({"bg-primary text-primary-foreground":a.active})},{default:i(()=>[r(s($),{href:a.url},{default:i(()=>[e("span",{innerHTML:a.label},null,8,ke)]),_:2},1032,["href"])]),_:2},1032,["class"])):_("",!0)],64))),128))])])):_("",!0)]),_:1})]),_:1})])]),_:1})],64))}});export{Je as default};
