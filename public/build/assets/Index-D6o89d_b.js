import{d as H,p as _,x as K,A as J,s as j,a as d,e as a,u as t,h as Q,w as s,b as n,f as i,i as $,o as u,F as w,r as V,t as m,n as X,k as Y,y as G,q as O,z as Z}from"./app-BBW6o1r9.js";import{a as ee,b as te,c as ae,d as se,e as le,f as ne,g as ie,h as re,_ as oe}from"./AppLayout.vue_vue_type_script_setup_true_lang-BcLmShpc.js";import{_ as c}from"./index-B9L7G9Rv.js";import{_ as ue,a as de,b as me,c as fe}from"./CardTitle.vue_vue_type_script_setup_true_lang-CXowdzp7.js";import{_ as pe}from"./CardDescription.vue_vue_type_script_setup_true_lang-CnjqM8qf.js";import{_ as P,a as S,b as T,c as B}from"./DialogTitle.vue_vue_type_script_setup_true_lang-lgdh0Icj.js";import{_ as z}from"./DialogDescription.vue_vue_type_script_setup_true_lang-DamY3F-X.js";import{_ as U}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DWi2V9Vx.js";import{_ as _e}from"./Input.vue_vue_type_script_setup_true_lang-B9nUrtAC.js";import{_ as ce}from"./Label.vue_vue_type_script_setup_true_lang-BH8mzYNI.js";import{_ as ve,a as ge,b as be,c as xe,d as h}from"./SelectValue.vue_vue_type_script_setup_true_lang-ClYkjULh.js";import{S as ye}from"./search-1guIOIkY.js";import{E as ke}from"./eye-DtfQ8aCc.js";import{C as $e}from"./check-Bzm-nAs_.js";import{X as we}from"./ChatWidget.vue_vue_type_script_setup_true_lang-kaMQb92Q.js";import"./VisuallyHidden-DIiqvBIA.js";import"./createLucideIcon-BLzKMMOk.js";import"./index-DIWVcIfu.js";import"./triangle-alert-Dtbafi59.js";import"./circle-x-trLA811n.js";import"./file-text-DoQ8wh0o.js";import"./useForwardExpose-C9lku0al.js";import"./useForwardPropsEmits-CLp0J1S9.js";import"./index-CMWG4mbA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-plus-DRI7_rC1.js";import"./chevron-down-Yb358yoj.js";import"./useFormControl-1vCCe6O0.js";import"./loader-circle-B5IH3YQX.js";const he={class:"flex flex-col gap-6 p-4"},Ce={class:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center"},je={class:"relative flex-1"},De={class:"overflow-x-auto rounded-lg border"},Ve={class:"w-full text-sm"},Pe={class:"divide-y"},Se={class:"px-4 py-3"},Te={class:"font-medium"},Be={class:"text-xs text-muted-foreground"},ze={class:"px-4 py-3 font-medium"},Ue={class:"px-4 py-3 text-muted-foreground"},Fe={class:"px-4 py-3"},Me={class:"px-4 py-3"},Ae={class:"flex items-center justify-center gap-2"},Ie={key:0},Le={key:0,class:"mt-4 flex items-center justify-between"},Ne={class:"text-sm text-muted-foreground"},Re={class:"flex gap-2"},Ee={class:"flex justify-center p-4"},We=["src"],qe=["src"],He={class:"space-y-2"},Ke={key:0,class:"text-sm text-red-500"},$t=H({__name:"Index",props:{payments:{},filters:{}},setup(p){const D=p,F=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Verifikasi Pembayaran",href:"/admin/reregistration-payments"}],x=_(D.filters.search),g=_(D.filters.status),y=_(!1),b=_(!1),k=_(!1),o=_(null),v=_(""),f=K({notes:""});J([x,g],()=>{j.get("/admin/reregistration-payments",{search:x.value||void 0,status:g.value!=="all"?g.value:void 0},{preserveState:!0,replace:!0})});const M=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),A=r=>new Date(r).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),I=r=>{r.payment_proof_path&&(v.value=`/storage/${r.payment_proof_path}`,o.value=r,y.value=!0)},L=r=>{o.value=r,k.value=!0},N=()=>{o.value&&j.post(`/admin/reregistration-payments/${o.value.id}/verify`,{},{onSuccess:()=>{k.value=!1}})},R=r=>{o.value=r,f.reset(),b.value=!0},E=()=>{o.value&&f.post(`/admin/reregistration-payments/${o.value.id}/reject`,{onSuccess:()=>{b.value=!1,f.reset()}})},W=r=>{switch(r){case"verified":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300"}},q=r=>{switch(r){case"verified":return"Terverifikasi";case"rejected":return"Ditolak";default:return"Pending"}};return(r,e)=>(u(),d(w,null,[a(t(Q),{title:"Verifikasi Pembayaran Daftar Ulang"}),a(oe,{breadcrumbs:F},{default:s(()=>[n("div",he,[a(t(ue),null,{default:s(()=>[a(t(de),null,{default:s(()=>[a(t(me),null,{default:s(()=>[...e[8]||(e[8]=[i("Verifikasi Pembayaran Daftar Ulang",-1)])]),_:1}),a(t(pe),null,{default:s(()=>[...e[9]||(e[9]=[i(" Kelola dan verifikasi pembayaran daftar ulang mahasiswa ",-1)])]),_:1})]),_:1}),a(t(fe),null,{default:s(()=>[n("div",Ce,[n("div",je,[a(t(ye),{class:"absolute top-1/2 left-3 size-4 -translate-y-1/2 text-muted-foreground"}),a(t(_e),{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=l=>x.value=l),placeholder:"Cari nama atau email...",class:"pl-10"},null,8,["modelValue"])]),a(t(ve),{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=l=>g.value=l)},{default:s(()=>[a(t(ge),{class:"w-full sm:w-48"},{default:s(()=>[a(t(be),{placeholder:"Filter Status"})]),_:1}),a(t(xe),null,{default:s(()=>[a(t(h),{value:"all"},{default:s(()=>[...e[10]||(e[10]=[i("Semua",-1)])]),_:1}),a(t(h),{value:"pending"},{default:s(()=>[...e[11]||(e[11]=[i("Pending",-1)])]),_:1}),a(t(h),{value:"verified"},{default:s(()=>[...e[12]||(e[12]=[i("Terverifikasi",-1)])]),_:1}),a(t(h),{value:"rejected"},{default:s(()=>[...e[13]||(e[13]=[i("Ditolak",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),n("div",De,[n("table",Ve,[e[15]||(e[15]=n("thead",{class:"bg-muted/50"},[n("tr",null,[n("th",{class:"px-4 py-3 text-left font-medium"}," Mahasiswa "),n("th",{class:"px-4 py-3 text-left font-medium"}," Jumlah "),n("th",{class:"px-4 py-3 text-left font-medium"}," Tanggal Upload "),n("th",{class:"px-4 py-3 text-left font-medium"}," Status "),n("th",{class:"px-4 py-3 text-center font-medium"}," Aksi ")])],-1)),n("tbody",Pe,[(u(!0),d(w,null,V(p.payments.data,l=>(u(),d("tr",{key:l.id,class:"hover:bg-muted/50"},[n("td",Se,[n("div",null,[n("div",Te,m(l.user.student_biodata?.name||l.user.name),1),n("div",Be,m(l.user.email),1)])]),n("td",ze,m(M(l.amount)),1),n("td",Ue,m(A(l.created_at)),1),n("td",Fe,[n("span",{class:X(["rounded-full px-2 py-1 text-xs font-medium",W(l.status)])},m(q(l.status)),3)]),n("td",Me,[n("div",Ae,[a(t(c),{size:"sm",variant:"outline",onClick:C=>I(l),disabled:!l.payment_proof_path},{default:s(()=>[a(t(ke),{class:"size-4"})]),_:1},8,["onClick","disabled"]),l.status==="pending"?(u(),d(w,{key:0},[a(t(c),{size:"sm",variant:"default",class:"bg-green-600 hover:bg-green-700",onClick:C=>L(l)},{default:s(()=>[a(t($e),{class:"size-4"})]),_:1},8,["onClick"]),a(t(c),{size:"sm",variant:"destructive",onClick:C=>R(l)},{default:s(()=>[a(t(we),{class:"size-4"})]),_:1},8,["onClick"])],64)):$("",!0)])])]))),128)),p.payments.data.length===0?(u(),d("tr",Ie,[...e[14]||(e[14]=[n("td",{colspan:"5",class:"px-4 py-8 text-center text-muted-foreground"}," Tidak ada data pembayaran ",-1)])])):$("",!0)])])]),p.payments.last_page>1?(u(),d("div",Le,[n("p",Ne," Menampilkan "+m(p.payments.data.length)+" dari "+m(p.payments.total)+" data ",1),n("div",Re,[(u(!0),d(w,null,V(p.payments.links,l=>(u(),Y(t(c),{key:l.label,size:"sm",variant:l.active?"default":"outline",disabled:!l.url,onClick:C=>l.url&&t(j).get(l.url),innerHTML:l.label},null,8,["variant","disabled","onClick","innerHTML"]))),128))])])):$("",!0)]),_:1})]),_:1})]),a(t(P),{open:y.value,"onUpdate:open":e[3]||(e[3]=l=>y.value=l)},{default:s(()=>[a(t(S),{class:"max-w-3xl"},{default:s(()=>[a(t(T),null,{default:s(()=>[a(t(B),null,{default:s(()=>[...e[16]||(e[16]=[i("Bukti Pembayaran",-1)])]),_:1}),a(t(z),null,{default:s(()=>[i(m(o.value?.user.student_biodata?.name||o.value?.user.name),1)]),_:1})]),_:1}),n("div",Ee,[v.value.endsWith(".jpg")||v.value.endsWith(".jpeg")||v.value.endsWith(".png")?(u(),d("img",{key:0,src:v.value,alt:"Bukti Pembayaran",class:"max-h-[60vh] rounded-lg object-contain"},null,8,We)):(u(),d("iframe",{key:1,src:v.value,class:"h-[60vh] w-full rounded-lg"},null,8,qe))]),a(t(U),null,{default:s(()=>[a(t(c),{variant:"outline",onClick:e[2]||(e[2]=l=>y.value=!1)},{default:s(()=>[...e[17]||(e[17]=[i(" Tutup ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),a(t(P),{open:b.value,"onUpdate:open":e[6]||(e[6]=l=>b.value=l)},{default:s(()=>[a(t(S),null,{default:s(()=>[a(t(T),null,{default:s(()=>[a(t(B),null,{default:s(()=>[...e[18]||(e[18]=[i("Tolak Pembayaran",-1)])]),_:1}),a(t(z),null,{default:s(()=>[...e[19]||(e[19]=[i(" Berikan alasan penolakan untuk mahasiswa ",-1)])]),_:1})]),_:1}),n("form",{onSubmit:G(E,["prevent"]),class:"space-y-4"},[n("div",He,[a(t(ce),{for:"reject_notes"},{default:s(()=>[...e[20]||(e[20]=[i("Alasan Penolakan *",-1)])]),_:1}),O(n("textarea",{id:"reject_notes","onUpdate:modelValue":e[4]||(e[4]=l=>t(f).notes=l),rows:"3",class:"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs placeholder:text-muted-foreground focus-visible:ring-1 focus-visible:ring-ring focus-visible:outline-none",placeholder:"Contoh: Bukti pembayaran tidak jelas, nominal tidak sesuai, dll."},null,512),[[Z,t(f).notes]]),t(f).errors.notes?(u(),d("p",Ke,m(t(f).errors.notes),1)):$("",!0)]),a(t(U),null,{default:s(()=>[a(t(c),{type:"button",variant:"outline",onClick:e[5]||(e[5]=l=>b.value=!1)},{default:s(()=>[...e[21]||(e[21]=[i(" Batal ",-1)])]),_:1}),a(t(c),{type:"submit",variant:"destructive",disabled:t(f).processing},{default:s(()=>[...e[22]||(e[22]=[i(" Tolak Pembayaran ",-1)])]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),a(t(ee),{open:k.value,"onUpdate:open":e[7]||(e[7]=l=>k.value=l)},{default:s(()=>[a(t(te),null,{default:s(()=>[a(t(ae),null,{default:s(()=>[a(t(se),null,{default:s(()=>[...e[23]||(e[23]=[i("Konfirmasi Verifikasi",-1)])]),_:1}),a(t(le),null,{default:s(()=>[e[24]||(e[24]=i(" Apakah Anda yakin ingin memverifikasi pembayaran dari ",-1)),n("strong",null,m(o.value?.user.student_biodata?.name||o.value?.user.name),1),e[25]||(e[25]=i("? Tindakan ini akan mengubah status pembayaran menjadi terverifikasi. ",-1))]),_:1})]),_:1}),a(t(ne),null,{default:s(()=>[a(t(ie),null,{default:s(()=>[...e[26]||(e[26]=[i("Batal",-1)])]),_:1}),a(t(re),{class:"bg-green-600 hover:bg-green-700",onClick:N},{default:s(()=>[...e[27]||(e[27]=[i(" Ya, Verifikasi ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{$t as default};
