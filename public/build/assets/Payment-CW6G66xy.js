import{d as V,x as j,c as p,a as d,e as a,u as e,h as z,w as n,b as r,f as o,n as N,t as l,k as b,i as c,o as i,F as g,y as A}from"./app-a-VEhmjC.js";import{_,a as k}from"./index-CEpZ3XAy.js";import{_ as x}from"./AlertTitle.vue_vue_type_script_setup_true_lang-BAlRMnPg.js";import{_ as M}from"./index-C0QnW9Bj.js";import{_ as S}from"./index-yL7gYrqA.js";import{_ as T,a as G,b as L,c as E}from"./CardTitle.vue_vue_type_script_setup_true_lang-DwA0GjL8.js";import{_ as H}from"./CardDescription.vue_vue_type_script_setup_true_lang-BKKgb-6S.js";import{_ as J}from"./Input.vue_vue_type_script_setup_true_lang-mhtrR-GO.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-DxNkhq_X.js";import{C as R,_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-DnCJ7c_z.js";import{C as K}from"./file-text-Dtz2EMTw.js";import{C as h}from"./circle-alert-tKNLB71L.js";import{U as P}from"./upload-B_n40JTM.js";import"./index-DVdEoLo_.js";import"./useForwardExpose-CbCDyoq-.js";import"./VisuallyHidden-JCLByn2L.js";import"./createLucideIcon-Bd519bqh.js";import"./triangle-alert-DWVwjR5_.js";import"./circle-x-Djj0TPju.js";import"./ChatWidget.vue_vue_type_script_setup_true_lang-Dvq1GNmk.js";import"./index-CMWG4mbA.js";import"./loader-circle-CkWoqG8V.js";import"./useForwardPropsEmits-D1pLRAed.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-plus-D0fCPCx7.js";const O={class:"flex flex-col gap-6 p-4"},Q={class:"flex items-center justify-between"},W={class:"rounded-lg bg-blue-50 p-4 dark:bg-blue-950/30"},X={class:"space-y-2 text-sm"},Y={class:"flex justify-between"},Z={class:"font-bold text-blue-900 dark:text-blue-200"},ee={class:"pt-2 text-blue-600 dark:text-blue-400"},te={class:"font-mono font-bold"},ae={class:"font-mono font-bold"},re={key:0,class:"pt-2 text-blue-600 dark:text-blue-400 italic"},ne={key:3,class:"space-y-2"},se={class:"rounded-lg border p-4"},oe=["src"],le=["href"],ie={class:"space-y-2"},de={class:"flex items-center gap-4"},me={class:"flex cursor-pointer items-center gap-2 rounded-lg border-2 border-dashed px-6 py-4 transition-colors hover:border-primary hover:bg-muted/50"},ue={class:"text-sm text-muted-foreground"},fe={key:0,class:"text-sm text-red-500"},Se=V({__name:"Payment",props:{biodata:{},payment:{},paymentInfo:{}},setup(s){const u=s,w=[{title:"Dashboard",href:"/student/dashboard"},{title:"Daftar Ulang",href:"/student/reregistration"},{title:"Pembayaran",href:"/student/reregistration/payment"}],m=j({payment_proof:null}),B=y=>{const t=y.target;t.files&&t.files[0]&&(m.payment_proof=t.files[0])},I=()=>{m.post("/student/reregistration/payment",{preserveScroll:!0,forceFormData:!0})},C=y=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(y),f=p(()=>u.payment?u.payment.status:"not_uploaded"),D=p(()=>{switch(f.value){case"pending":return"Menunggu Verifikasi";case"verified":return"Terverifikasi";case"rejected":return"Ditolak";default:return"Belum Upload"}}),U=p(()=>{switch(f.value){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"verified":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}}),$=p(()=>u.biodata.reregistration_status==="form_completed"||u.biodata.reregistration_status==="payment_pending"),F=p(()=>u.paymentInfo.payment_type==="va");return(y,t)=>(i(),d(g,null,[a(e(z),{title:"Pembayaran Daftar Ulang"}),a(q,{breadcrumbs:w},{default:n(()=>[r("div",O,[a(e(T),null,{default:n(()=>[a(e(G),null,{default:n(()=>[r("div",Q,[r("div",null,[a(e(L),{class:"flex items-center gap-2"},{default:n(()=>[a(e(R),{class:"size-5"}),t[0]||(t[0]=o(" Pembayaran Daftar Ulang ",-1))]),_:1}),a(e(H),null,{default:n(()=>[...t[1]||(t[1]=[o(" Upload bukti pembayaran biaya daftar ulang ",-1)])]),_:1})]),a(e(M),{class:N(U.value)},{default:n(()=>[o(l(D.value),1)]),_:1},8,["class"])])]),_:1}),a(e(E),{class:"space-y-6"},{default:n(()=>[r("div",W,[t[5]||(t[5]=r("h4",{class:"mb-2 font-medium text-blue-800 dark:text-blue-300"}," Informasi Pembayaran ",-1)),r("div",X,[r("div",Y,[t[2]||(t[2]=r("span",{class:"text-blue-700 dark:text-blue-400"},"Biaya Daftar Ulang:",-1)),r("span",Z,l(C(s.paymentInfo.amount)),1)]),r("div",ee,[F.value?(i(),d(g,{key:0},[t[3]||(t[3]=r("p",{class:"font-medium"},"Nomor Pembayaran / VA:",-1)),r("p",null,[o("Virtual Account "+l(s.paymentInfo.bank_name)+": ",1),r("span",te,l(s.paymentInfo.account_number),1)]),r("p",null,"a.n. "+l(s.paymentInfo.account_name),1)],64)):(i(),d(g,{key:1},[t[4]||(t[4]=r("p",{class:"font-medium"},"Transfer ke:",-1)),r("p",null,[o("Bank "+l(s.paymentInfo.bank_name)+": ",1),r("span",ae,l(s.paymentInfo.account_number),1)]),r("p",null,"a.n. "+l(s.paymentInfo.account_name),1)],64))]),s.paymentInfo.instructions?(i(),d("p",re,l(s.paymentInfo.instructions),1)):c("",!0)])]),f.value==="verified"?(i(),b(e(_),{key:0,class:"border-green-500 bg-green-50 dark:border-green-800 dark:bg-green-950/30"},{default:n(()=>[a(e(K),{class:"size-4 text-green-600"}),a(e(x),{class:"text-green-800 dark:text-green-300"},{default:n(()=>[...t[6]||(t[6]=[o(" Pembayaran Terverifikasi ",-1)])]),_:1}),a(e(k),{class:"text-green-700 dark:text-green-400"},{default:n(()=>[...t[7]||(t[7]=[o(" Pembayaran Anda telah diverifikasi. Proses daftar ulang telah selesai. ",-1)])]),_:1})]),_:1})):f.value==="pending"?(i(),b(e(_),{key:1,class:"border-yellow-500 bg-yellow-50 dark:border-yellow-800 dark:bg-yellow-950/30"},{default:n(()=>[a(e(h),{class:"size-4 text-yellow-600"}),a(e(x),{class:"text-yellow-800 dark:text-yellow-300"},{default:n(()=>[...t[8]||(t[8]=[o(" Menunggu Verifikasi ",-1)])]),_:1}),a(e(k),{class:"text-yellow-700 dark:text-yellow-400"},{default:n(()=>[...t[9]||(t[9]=[o(" Bukti pembayaran Anda sedang diverifikasi oleh admin. Harap tunggu. ",-1)])]),_:1})]),_:1})):f.value==="rejected"?(i(),b(e(_),{key:2,variant:"destructive"},{default:n(()=>[a(e(h),{class:"size-4"}),a(e(x),null,{default:n(()=>[...t[10]||(t[10]=[o("Pembayaran Ditolak",-1)])]),_:1}),a(e(k),null,{default:n(()=>[o(l(s.payment?.notes||"Bukti pembayaran tidak valid. Silakan upload ulang."),1)]),_:1})]),_:1})):c("",!0),s.payment?.payment_proof_url?(i(),d("div",ne,[a(e(v),null,{default:n(()=>[...t[11]||(t[11]=[o("Bukti Pembayaran Terupload",-1)])]),_:1}),r("div",se,[s.payment.payment_proof_path?.match(/\.(jpg|jpeg|png)$/i)?(i(),d("img",{key:0,src:s.payment.payment_proof_url,alt:"Bukti Pembayaran",class:"max-h-64 rounded-lg object-contain"},null,8,oe)):(i(),d("a",{key:1,href:s.payment.payment_proof_url,target:"_blank",class:"text-blue-600 hover:underline"}," Lihat Bukti Pembayaran (PDF) ",8,le))])])):c("",!0),$.value?(i(),d("form",{key:4,onSubmit:A(I,["prevent"]),class:"space-y-4"},[r("div",ie,[a(e(v),null,{default:n(()=>[o(l(s.payment?"Upload Ulang Bukti Pembayaran":"Upload Bukti Pembayaran"),1)]),_:1}),r("div",de,[r("label",me,[a(e(P),{class:"size-5 text-muted-foreground"}),r("span",ue,l(e(m).payment_proof?.name||"Pilih file..."),1),a(e(J),{type:"file",accept:"image/*,.pdf",class:"hidden",onChange:B})])]),t[12]||(t[12]=r("p",{class:"text-xs text-muted-foreground"}," Format: JPG, PNG, PDF. Maksimal 2MB. ",-1)),e(m).errors.payment_proof?(i(),d("p",fe,l(e(m).errors.payment_proof),1)):c("",!0)]),a(e(S),{type:"submit",disabled:!e(m).payment_proof||e(m).processing},{default:n(()=>[a(e(P),{class:"mr-2 size-4"}),o(" "+l(e(m).processing?"Mengupload...":"Upload Bukti Pembayaran"),1)]),_:1},8,["disabled"])],32)):c("",!0)]),_:1})]),_:1})])]),_:1})],64))}});export{Se as default};
