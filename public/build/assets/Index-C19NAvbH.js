import{d as le,j as se,c as te,p,A as oe,s as S,x as ne,a as $,e as l,u as e,h as ie,w as s,b as t,k as T,i as D,o as u,f as n,t as r,F as U,r as P,y as de}from"./app-D5OcARYv.js";import{_ as B,a as h}from"./index-C1Ft3s5T.js";import{_ as j}from"./AlertTitle.vue_vue_type_script_setup_true_lang-BSLCEp3t.js";import{a as A,_ as re}from"./AppLayout.vue_vue_type_script_setup_true_lang-DinLlKE5.js";import{_ as m}from"./index-UEfTj4wh.js";import{_ as ue,a as me,b as fe,c as pe}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3mlPz-I.js";import{_ as M,a as E,b as N,c as R}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BQo5Yl-l.js";import{_ as _e}from"./DialogDescription.vue_vue_type_script_setup_true_lang-silKCfmM.js";import{_ as H}from"./DialogFooter.vue_vue_type_script_setup_true_lang-D-0ZZbjn.js";import{_ as c}from"./Input.vue_vue_type_script_setup_true_lang-CCcVPA01.js";import{_ as x}from"./Label.vue_vue_type_script_setup_true_lang-YPxoaBcV.js";import{_ as F,a as L,b as Y,c as q,d as _}from"./SelectValue.vue_vue_type_script_setup_true_lang-BB0jITnO.js";import{C as ve}from"./file-text-CV_xxGPM.js";import{C as ge}from"./circle-x-D2BRpvpn.js";import{S as ce}from"./search-8GcQTARh.js";import{P as xe}from"./plus-BkGP3DnR.js";import{S as ye}from"./square-pen-CwIt8RVL.js";import{T as be}from"./trash-Mgzoy7_5.js";import{T as I}from"./triangle-alert-BmIPATx-.js";import"./VisuallyHidden-uWdxpz0q.js";import"./createLucideIcon-x21i96bS.js";import"./index-Bo1-g3F-.js";import"./ChatWidget.vue_vue_type_script_setup_true_lang-lf1i5k0i.js";import"./index-CMWG4mbA.js";import"./loader-circle-DhjY_-Pi.js";import"./useForwardExpose-CO2v1_2r.js";import"./useForwardPropsEmits-Dl70jCDi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-plus-LeFNbwb6.js";import"./chevron-down-CkMHeUit.js";import"./check-DrZNu8iJ.js";import"./useFormControl-CZvRGZSH.js";const ke={class:"flex flex-col gap-6 p-4"},$e={class:"flex flex-wrap gap-2"},we={class:"relative"},Ve={class:"overflow-x-auto rounded-lg border"},Ce={class:"w-full text-sm"},Se={class:"divide-y"},Te={class:"px-4 py-3 font-medium"},De={class:"px-4 py-3"},Ue={class:"px-4 py-3"},ze={class:"px-4 py-3"},Pe={class:"px-4 py-3"},Be={class:"px-4 py-3"},he={class:"flex gap-2"},je={class:"mt-4 flex justify-center gap-1"},Ae=["innerHTML"],Me={class:"space-y-2"},Ee={class:"space-y-2"},Ne={class:"space-y-2"},Re={class:"space-y-2"},He={class:"space-y-2"},Fe={class:"space-y-2"},Le={class:"space-y-4 py-4"},Ye={class:"rounded-lg border border-gray-200 bg-gray-50 p-4"},qe={class:"font-medium"},Ie={class:"text-sm text-gray-600"},Ke={class:"rounded-lg border border-amber-200 bg-amber-50 p-4"},Xe={class:"flex items-center gap-2 text-sm font-semibold text-amber-800"},Sa=le({__name:"Index",props:{users:{},filters:{}},setup(K){const w=K,X=se(),V=te(()=>X.props.flash),y=p(w.filters.role||"all"),C=p(w.filters.search||"");oe([y,C],()=>{S.get("/admin/users",{role:y.value!=="all"?y.value:void 0,search:C.value||void 0},{preserveState:!0,replace:!0})});const f=p(!1),v=p(null),b=p(!1),g=p(null),k=p(!1),i=ne({name:"",email:"",phone:"",role:"student",password:"",password_confirmation:""}),G=()=>{v.value=null,i.reset(),i.role="student",f.value=!0},J=d=>{v.value=d,i.name=d.name,i.email=d.email,i.phone=d.phone||"",i.role=d.role,i.password="",i.password_confirmation="",f.value=!0},O=()=>{v.value?i.put(`/admin/users/${v.value.hashed_id}`,{onSuccess:()=>f.value=!1}):i.post("/admin/users",{onSuccess:()=>f.value=!1})},Q=d=>{g.value=d,b.value=!0},W=()=>{g.value&&(k.value=!0,S.delete(`/admin/users/${g.value.hashed_id}`,{onFinish:()=>{k.value=!1,b.value=!1,g.value=null}}))},Z=d=>{d.role==="student"?Q(d):confirm("Hapus pengguna ini?")&&S.delete(`/admin/users/${d.hashed_id}`)},ee=d=>{switch(d){case"admin":return"destructive";case"staff":return"default";default:return"secondary"}},ae=[{title:"Admin Dashboard",href:"/admin/dashboard"},{title:"Manajemen Pengguna",href:"/admin/users"}];return(d,a)=>(u(),$(U,null,[l(e(ie),{title:"Manajemen Pengguna"}),l(re,{breadcrumbs:ae},{default:s(()=>[t("div",ke,[V.value?.success?(u(),T(e(B),{key:0,class:"border-green-500 bg-green-50"},{default:s(()=>[l(e(ve),{class:"size-4 text-green-600"}),l(e(j),{class:"text-green-800"},{default:s(()=>[...a[12]||(a[12]=[n("Berhasil",-1)])]),_:1}),l(e(h),{class:"text-green-700"},{default:s(()=>[n(r(V.value.success),1)]),_:1})]),_:1})):D("",!0),V.value?.error?(u(),T(e(B),{key:1,class:"border-red-500 bg-red-50"},{default:s(()=>[l(e(ge),{class:"size-4 text-red-600"}),l(e(j),{class:"text-red-800"},{default:s(()=>[...a[13]||(a[13]=[n("Error",-1)])]),_:1}),l(e(h),{class:"text-red-700"},{default:s(()=>[n(r(V.value.error),1)]),_:1})]),_:1})):D("",!0),l(e(ue),null,{default:s(()=>[l(e(me),{class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},{default:s(()=>[l(e(fe),null,{default:s(()=>[...a[14]||(a[14]=[n("Manajemen Pengguna",-1)])]),_:1}),t("div",$e,[t("div",we,[l(e(ce),{class:"absolute top-2.5 left-2 size-4 text-gray-400"}),l(e(c),{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=o=>C.value=o),placeholder:"Cari...",class:"w-48 pl-8"},null,8,["modelValue"])]),l(e(F),{modelValue:y.value,"onUpdate:modelValue":a[1]||(a[1]=o=>y.value=o)},{default:s(()=>[l(e(L),{class:"w-32"},{default:s(()=>[l(e(Y),{placeholder:"Role"})]),_:1}),l(e(q),null,{default:s(()=>[l(e(_),{value:"all"},{default:s(()=>[...a[15]||(a[15]=[n("Semua",-1)])]),_:1}),l(e(_),{value:"admin"},{default:s(()=>[...a[16]||(a[16]=[n("Admin",-1)])]),_:1}),l(e(_),{value:"staff"},{default:s(()=>[...a[17]||(a[17]=[n("Staff",-1)])]),_:1}),l(e(_),{value:"student"},{default:s(()=>[...a[18]||(a[18]=[n("Student",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(e(m),{onClick:G},{default:s(()=>[l(e(xe),{class:"mr-2 size-4"}),a[19]||(a[19]=n(" Tambah ",-1))]),_:1})])]),_:1}),l(e(pe),null,{default:s(()=>[t("div",Ve,[t("table",Ce,[a[20]||(a[20]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left"},"Nama"),t("th",{class:"px-4 py-3 text-left"},"Email"),t("th",{class:"px-4 py-3 text-left"},"Telepon"),t("th",{class:"px-4 py-3 text-left"},"Role"),t("th",{class:"px-4 py-3 text-left"}," Verified "),t("th",{class:"px-4 py-3 text-left"},"Aksi")])],-1)),t("tbody",Se,[(u(!0),$(U,null,P(w.users.data,o=>(u(),$("tr",{key:o.id,class:"hover:bg-gray-50"},[t("td",Te,r(o.name),1),t("td",De,r(o.email),1),t("td",Ue,r(o.phone||"-"),1),t("td",ze,[l(e(A),{variant:ee(o.role)},{default:s(()=>[n(r(o.role),1)]),_:2},1032,["variant"])]),t("td",Pe,[l(e(A),{variant:o.email_verified_at?"default":"secondary"},{default:s(()=>[n(r(o.email_verified_at?"Ya":"Tidak"),1)]),_:2},1032,["variant"])]),t("td",Be,[t("div",he,[o.role!=="student"?(u(),T(e(m),{key:0,size:"sm",variant:"ghost",onClick:z=>J(o)},{default:s(()=>[l(e(ye),{class:"size-4"})]),_:1},8,["onClick"])):D("",!0),l(e(m),{size:"sm",variant:"ghost",onClick:z=>Z(o)},{default:s(()=>[l(e(be),{class:"size-4 text-red-500"})]),_:1},8,["onClick"])])])]))),128))])])]),t("div",je,[(u(!0),$(U,null,P(w.users.links,o=>(u(),$(U,{key:o.label},[o.url?(u(),T(e(m),{key:0,size:"sm",variant:o.active?"default":"outline",onClick:z=>e(S).get(o.url)},{default:s(()=>[t("span",{innerHTML:o.label},null,8,Ae)]),_:2},1032,["variant","onClick"])):D("",!0)],64))),128))])]),_:1})]),_:1})]),l(e(M),{open:f.value,"onUpdate:open":a[9]||(a[9]=o=>f.value=o)},{default:s(()=>[l(e(E),{class:"max-w-md"},{default:s(()=>[l(e(N),null,{default:s(()=>[l(e(R),null,{default:s(()=>[n(r(v.value?"Edit":"Tambah")+" Pengguna",1)]),_:1})]),_:1}),t("form",{onSubmit:de(O,["prevent"]),class:"space-y-4"},[t("div",Me,[l(e(x),null,{default:s(()=>[...a[21]||(a[21]=[n("Nama",-1)])]),_:1}),l(e(c),{modelValue:e(i).name,"onUpdate:modelValue":a[2]||(a[2]=o=>e(i).name=o)},null,8,["modelValue"])]),t("div",Ee,[l(e(x),null,{default:s(()=>[...a[22]||(a[22]=[n("Email",-1)])]),_:1}),l(e(c),{modelValue:e(i).email,"onUpdate:modelValue":a[3]||(a[3]=o=>e(i).email=o),type:"email"},null,8,["modelValue"])]),t("div",Ne,[l(e(x),null,{default:s(()=>[...a[23]||(a[23]=[n("Telepon",-1)])]),_:1}),l(e(c),{modelValue:e(i).phone,"onUpdate:modelValue":a[4]||(a[4]=o=>e(i).phone=o)},null,8,["modelValue"])]),t("div",Re,[l(e(x),null,{default:s(()=>[...a[24]||(a[24]=[n("Role",-1)])]),_:1}),l(e(F),{modelValue:e(i).role,"onUpdate:modelValue":a[5]||(a[5]=o=>e(i).role=o)},{default:s(()=>[l(e(L),null,{default:s(()=>[l(e(Y))]),_:1}),l(e(q),null,{default:s(()=>[l(e(_),{value:"admin"},{default:s(()=>[...a[25]||(a[25]=[n("Admin",-1)])]),_:1}),l(e(_),{value:"staff"},{default:s(()=>[...a[26]||(a[26]=[n("Staff",-1)])]),_:1}),l(e(_),{value:"student"},{default:s(()=>[...a[27]||(a[27]=[n("Student",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t("div",He,[l(e(x),null,{default:s(()=>[n("Password "+r(v.value?"(kosongkan jika tidak diubah)":""),1)]),_:1}),l(e(c),{modelValue:e(i).password,"onUpdate:modelValue":a[6]||(a[6]=o=>e(i).password=o),type:"password"},null,8,["modelValue"])]),t("div",Fe,[l(e(x),null,{default:s(()=>[...a[28]||(a[28]=[n("Konfirmasi Password",-1)])]),_:1}),l(e(c),{modelValue:e(i).password_confirmation,"onUpdate:modelValue":a[7]||(a[7]=o=>e(i).password_confirmation=o),type:"password"},null,8,["modelValue"])]),l(e(H),null,{default:s(()=>[l(e(m),{type:"button",variant:"outline",onClick:a[8]||(a[8]=o=>f.value=!1)},{default:s(()=>[...a[29]||(a[29]=[n("Batal",-1)])]),_:1}),l(e(m),{type:"submit",disabled:e(i).processing},{default:s(()=>[...a[30]||(a[30]=[n("Simpan",-1)])]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(M),{open:b.value,"onUpdate:open":a[11]||(a[11]=o=>b.value=o)},{default:s(()=>[l(e(E),{class:"max-w-md"},{default:s(()=>[l(e(N),null,{default:s(()=>[l(e(R),{class:"flex items-center gap-2 text-red-600"},{default:s(()=>[l(e(I),{class:"size-5"}),a[31]||(a[31]=n(" Hapus Akun ",-1))]),_:1}),l(e(_e),null,{default:s(()=>[...a[32]||(a[32]=[n(" Anda yakin ingin menghapus akun ini? ",-1)])]),_:1})]),_:1}),t("div",Le,[t("div",Ye,[t("p",qe,r(g.value?.name),1),t("p",Ie,r(g.value?.email),1)]),t("div",Ke,[t("p",Xe,[l(e(I),{class:"size-4"}),a[33]||(a[33]=n(" Peringatan! ",-1))]),a[34]||(a[34]=t("p",{class:"mt-2 text-sm text-amber-700"},[n(" Data berikut juga akan "),t("strong",null,"ikut terhapus"),n(": ")],-1)),a[35]||(a[35]=t("ul",{class:"mt-2 list-inside list-disc space-y-1 text-sm text-amber-700"},[t("li",null,"Biodata calon mahasiswa"),t("li",null,"Dokumen yang telah diupload"),t("li",null,"Data pendaftaran"),t("li",null,"Riwayat verifikasi dokumen")],-1))])]),l(e(H),null,{default:s(()=>[l(e(m),{type:"button",variant:"outline",onClick:a[10]||(a[10]=o=>b.value=!1),disabled:k.value},{default:s(()=>[...a[36]||(a[36]=[n(" Batal ",-1)])]),_:1},8,["disabled"]),l(e(m),{type:"button",variant:"destructive",onClick:W,disabled:k.value},{default:s(()=>[n(r(k.value?"Menghapus...":"Ya, Hapus"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{Sa as default};
