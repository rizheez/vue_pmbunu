import{d as S,j as T,c as A,p as v,x as D,a as _,e as t,u as e,h as N,w as a,b as i,k as j,i as x,o as f,f as r,t as m,F as h,r as U,y as E,q as F,z as M,s as q}from"./app-Dpup7XTm.js";import{_ as I,a as J}from"./index-DT5TPJC4.js";import{_ as H}from"./AlertTitle.vue_vue_type_script_setup_true_lang-oKc4kvnV.js";import{a as K,_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cff7eQ34.js";import{_ as p}from"./index-Bt1EVgH0.js";import{_ as G}from"./Checkbox.vue_vue_type_script_setup_true_lang-B1i3zW3U.js";import{_ as O,a as Q,b as R,c as W}from"./CardTitle.vue_vue_type_script_setup_true_lang-CrO9LWWu.js";import{f as X}from"./useFormat-CGBiKtzC.js";import{_ as Y,a as Z,b as ee,c as se}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DEfgYdKZ.js";import{_ as te}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CuBh5d3z.js";import{_ as ae}from"./Input.vue_vue_type_script_setup_true_lang-DD9WQFSZ.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-CQAMQZD8.js";import{C as ne}from"./file-text-ssdjFVpM.js";import{P as le}from"./plus-C5d2_46_.js";import{S as ie}from"./square-pen-DWv4HVdZ.js";import{T as oe}from"./trash-DyN1chcB.js";import"./VisuallyHidden-Bwn0Q5YK.js";import"./createLucideIcon-CnmiWldw.js";import"./index-k55cgd39.js";import"./triangle-alert-CHQ1_HPb.js";import"./circle-x-CLe3NqGU.js";import"./ChatWidget.vue_vue_type_script_setup_true_lang-BrYYjEs5.js";import"./index-CMWG4mbA.js";import"./loader-circle-C9m9iIH2.js";import"./useForwardExpose-DWRM4F7f.js";import"./useForwardPropsEmits-BUMdwXqd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-plus-BSecNYUZ.js";import"./useFormControl-6Xs5tB7C.js";import"./check-BdJ4rHX2.js";const re={class:"flex flex-col gap-6 p-4"},ue={class:"space-y-4"},me={class:"flex-1"},de={class:"flex items-center gap-2"},fe={class:"font-medium"},pe={class:"mt-1 text-sm text-gray-600"},_e={class:"mt-2 text-xs text-gray-400"},ce={class:"flex gap-2"},ge={key:0,class:"text-center text-gray-500"},be={class:"space-y-2"},ve={class:"space-y-2"},xe={class:"flex items-center gap-2"},We=S({__name:"Index",props:{announcements:{}},setup($){const g=$,y=T(),b=A(()=>y.props.flash),u=v(!1),d=v(null),l=D({title:"",content:"",is_published:!0}),k=(o,s)=>o.length>s?o.substring(0,s)+"...":o,C=()=>{d.value=null,l.reset(),l.is_published=!0,u.value=!0},w=o=>{d.value=o,l.title=o.title,l.content=o.content,l.is_published=o.is_published,u.value=!0},V=()=>{d.value?l.put(`/admin/announcements/${d.value.id}`,{onSuccess:()=>u.value=!1}):l.post("/admin/announcements",{onSuccess:()=>u.value=!1})},P=o=>{confirm("Hapus pengumuman ini?")&&q.delete(`/admin/announcements/${o}`)},B=[{title:"Admin Dashboard",href:"/admin/dashboard"},{title:"Announcements",href:"/admin/announcements"}];return(o,s)=>(f(),_(h,null,[t(e(N),{title:"Pengumuman"}),t(L,{breadcrumbs:B},{default:a(()=>[i("div",re,[b.value?.success?(f(),j(e(I),{key:0,class:"border-green-500 bg-green-50"},{default:a(()=>[t(e(ne),{class:"size-4 text-green-600"}),t(e(H),{class:"text-green-800"},{default:a(()=>[...s[5]||(s[5]=[r("Berhasil",-1)])]),_:1}),t(e(J),{class:"text-green-700"},{default:a(()=>[r(m(b.value.success),1)]),_:1})]),_:1})):x("",!0),t(e(O),null,{default:a(()=>[t(e(Q),{class:"flex flex-row items-center justify-between"},{default:a(()=>[t(e(R),null,{default:a(()=>[...s[6]||(s[6]=[r("Manajemen Pengumuman",-1)])]),_:1}),t(e(p),{onClick:C},{default:a(()=>[t(e(le),{class:"mr-2 size-4"}),s[7]||(s[7]=r(" Tambah Pengumuman ",-1))]),_:1})]),_:1}),t(e(W),null,{default:a(()=>[i("div",ue,[(f(!0),_(h,null,U(g.announcements,n=>(f(),_("div",{key:n.id,class:"flex items-start justify-between rounded-lg border p-4"},[i("div",me,[i("div",de,[i("h3",fe,m(n.title),1),t(e(K),{variant:n.is_published?"default":"secondary"},{default:a(()=>[r(m(n.is_published?"Aktif":"Nonaktif"),1)]),_:2},1032,["variant"])]),i("p",pe,m(k(n.content,300)),1),i("p",_e,m(e(X)(n.created_at)),1)]),i("div",ce,[t(e(p),{size:"sm",variant:"ghost",onClick:z=>w(n)},{default:a(()=>[t(e(ie),{class:"size-4"})]),_:1},8,["onClick"]),t(e(p),{size:"sm",variant:"ghost",onClick:z=>P(n.id)},{default:a(()=>[t(e(oe),{class:"size-4 text-red-500"})]),_:1},8,["onClick"])])]))),128)),g.announcements.length===0?(f(),_("p",ge," Belum ada pengumuman ")):x("",!0)])]),_:1})]),_:1})]),t(e(Y),{open:u.value,"onUpdate:open":s[4]||(s[4]=n=>u.value=n)},{default:a(()=>[t(e(Z),{class:"min-w-2xl"},{default:a(()=>[t(e(ee),null,{default:a(()=>[t(e(se),null,{default:a(()=>[r(m(d.value?"Edit Pengumuman":"Tambah Pengumuman"),1)]),_:1})]),_:1}),i("form",{onSubmit:E(V,["prevent"]),class:"space-y-4"},[i("div",be,[t(e(c),null,{default:a(()=>[...s[8]||(s[8]=[r("Judul",-1)])]),_:1}),t(e(ae),{modelValue:e(l).title,"onUpdate:modelValue":s[0]||(s[0]=n=>e(l).title=n),placeholder:"Judul pengumuman"},null,8,["modelValue"])]),i("div",ve,[t(e(c),null,{default:a(()=>[...s[9]||(s[9]=[r("Konten",-1)])]),_:1}),F(i("textarea",{"onUpdate:modelValue":s[1]||(s[1]=n=>e(l).content=n),rows:"4",class:"flex min-h-32 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm",placeholder:"Isi pengumuman..."},null,512),[[M,e(l).content]])]),i("div",xe,[t(e(G),{id:"is_published",modelValue:e(l).is_published,"onUpdate:modelValue":s[2]||(s[2]=n=>e(l).is_published=n)},null,8,["modelValue"]),t(e(c),{for:"is_published"},{default:a(()=>[...s[10]||(s[10]=[r("Aktif",-1)])]),_:1})]),t(e(te),null,{default:a(()=>[t(e(p),{type:"button",variant:"outline",onClick:s[3]||(s[3]=n=>u.value=!1)},{default:a(()=>[...s[11]||(s[11]=[r("Batal",-1)])]),_:1}),t(e(p),{type:"submit",disabled:e(l).processing},{default:a(()=>[...s[12]||(s[12]=[r("Simpan",-1)])]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{We as default};
